---
layout: layout.njk
---

<header class="article-header">
  <h1>{{ title }}</h1>

  {% if excerpt %}
    <p><em>{{ excerpt }}</em></p>
  {% endif %}

  {% if author %}
    <p><strong>By {{ author }}</strong></p>
  {% endif %}

  {% if date %}
    <p>
      <time datetime="{{ date }}">
        {{ date | readableDate }}
      </time>
    </p>
  {% endif %}

</header>

<article class="article-content">
  {{ content | safe }}
</article>

<p class="print-link-wrap">
  <a class="print-link" href="#" onclick="window.print(); return false;">Print / Save as PDF</a>
</p>

{% if bookParent %}
  <div class="book-return-link">
    <a href="/books/fractured-light/">
      Read the full book: <strong><em>Fractured Light</em></strong>
    </a>
  </div>
{% endif %}

{% if tags %}
<div class="article-tags" id="article-tags">
  {% for tag in tags %}
    <a href="/tags/{{ tag | slug }}/" class="tag-pill">{{ tag }}</a>
  {% endfor %}
</div>
{% endif %}

<hr class="article-contact-divider">

<p class="article-contact-note">
  If this meets you where you are, and you wish to <a href="mailto:marginsdevotionals@gmail.com" class="article-contact-link">respond</a>, you may. I read every message.
</p>

<!-- Reading Path Navigation Mount -->
<div data-reading-path-nav></div>

{% include "reading-path-nav.njk" %}

<style>
  .article-contact-divider {
    margin: 2rem 0 1rem 0;
    opacity: 0.35;
  }

  .article-contact-note {
    font-size: 0.9rem;
    font-weight: 300;
    opacity: 0.8;
  }

  .article-contact-link {
    text-decoration: underline;
  }

  .book-return-link {
    margin: 2rem 0 1rem 0;
    text-align: left;
  }

  .book-return-link a {
    text-decoration: underline;
    color: #5a3e2b;
  }

  .article-tags {
    margin-top: 2rem;
  }

  .tag-pill {
    display: inline-block;
    margin: 0 0.8rem 0.8rem 0;
    padding: 0.45rem 0.9rem;
    font-size: 0.95rem;
    text-decoration: none;
    border-radius: 6px;
    background-color: #f1e8dc;
    color: #5a3e2b;
    border: 1px solid #d8c8b3;
  }

  .tag-pill:hover {
    background-color: #e6d9c7;
  }
</style>

<script>
  (function () {
    function hideTagsIfReadingPathActive() {
      const navContainer = document.querySelector('[data-reading-path-nav]');
      const tags = document.getElementById('article-tags');

      if (!navContainer || !tags) return;

      if (navContainer.innerHTML.trim().length > 0) {
        tags.style.display = 'none';
      }
    }

    window.addEventListener('load', hideTagsIfReadingPathActive);
  })();
</script>
